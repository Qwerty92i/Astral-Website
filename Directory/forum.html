<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Forum de discussion</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Forum de discussion</h1>

    <div id="messages"></div>

    <form id="form">
        <input type="text" id="author" placeholder="Votre nom" required>
        <textarea id="content" placeholder="Votre message" required></textarea>
        <button type="submit">Envoyer</button>
    </form>

    <script>
        async function loadMessages() {
    const res = await fetch("/messages");
    const messages = await res.json();

    const container = document.getElementById("messages");
    container.innerHTML = "";

    messages.forEach(m => {
        container.innerHTML += `
            <div class="message">
                <strong>${m.author}</strong> <em>${new Date(m.date).toLocaleString()}</em>
                <p>${m.content}</p>
            </div>
        `;
    });
}

document.getElementById("form").addEventListener("submit", async (e) => {
    e.preventDefault();

    const author = document.getElementById("author").value;
    const content = document.getElementById("content").value;

    await fetch("/messages", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ author, content })
    });

    document.getElementById("content").value = "";
    loadMessages();
});

loadMessages();
    </script>
    <style>
        body {
    font-family: Arial, sans-serif;
    width: 700px;
    margin: auto;
    padding-top: 40px;
}

#messages {
    border: 1px solid #ddd;
    padding: 15px;
    margin-bottom: 20px;
}

.message {
    border-bottom: 1px solid #eee;
    padding: 10px 0;
}

.message:last-child {
    border-bottom: none;
}

form {
    display: flex;
    flex-direction: column;
}

input, textarea {
    margin-bottom: 10px;
    padding: 10px;
    font-size: 16px;
}

button {
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
}
    </style>
</body>
</html>